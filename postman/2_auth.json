{
  "info": {
    "name": "2. Auth (ì¸ì¦)",
    "description": "ì¸ì¦ ê´€ë ¨ API\n\n### í¬í•¨ ê¸°ëŠ¥\n- 2-1. íšŒì›ê°€ì…/ë¡œê·¸ì¸ (ì „í™”ë²ˆí˜¸)\n- 2-2. í† í° ê´€ë¦¬\n- 2-3. Google OAuth",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "2-1. Phone Auth",
      "item": [
        {
          "name": "Register (íšŒì›ê°€ì…)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"01012345678\",\n  \"password\": \"password123\",\n  \"name\": \"í…ŒìŠ¤íŠ¸ìœ ì €\"\n}"
            },
            "url": {"raw": "{{base_url}}/auth/register", "host": ["{{base_url}}"], "path": ["auth", "register"]}
          },
          "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status 200/201\", () => pm.expect(pm.response.code).to.be.oneOf([200, 201]));"], "type": "text/javascript"}}]
        },
        {
          "name": "Login (ë¡œê·¸ì¸)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"01012345678\",\n  \"password\": \"password123\"\n}"
            },
            "url": {"raw": "{{base_url}}/auth/login", "host": ["{{base_url}}"], "path": ["auth", "login"]}
          },
          "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 200) {", "    var json = pm.response.json();", "    if (json.access_token) pm.environment.set(\"access_token\", json.access_token);", "    if (json.refresh_token) pm.environment.set(\"refresh_token\", json.refresh_token);", "}", "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"], "type": "text/javascript"}}]
        }
      ]
    },
    {
      "name": "2-2. Token Management",
      "item": [
        {
          "name": "Refresh Token (í† í° ê°±ì‹ )",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {"raw": "{{base_url}}/auth/refresh", "host": ["{{base_url}}"], "path": ["auth", "refresh"]}
          },
          "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 200) {", "    var json = pm.response.json();", "    if (json.access_token) pm.environment.set(\"access_token\", json.access_token);", "}", "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"], "type": "text/javascript"}}]
        },
        {
          "name": "Logout (ë¡œê·¸ì•„ì›ƒ)",
          "request": {
            "method": "POST",
            "header": [{"key": "Authorization", "value": "Bearer {{access_token}}"}],
            "url": {"raw": "{{base_url}}/auth/logout", "host": ["{{base_url}}"], "path": ["auth", "logout"]}
          },
          "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status 200\", () => pm.response.to.have.status(200));"], "type": "text/javascript"}}]
        }
      ]
    },
    {
      "name": "2-3. Google OAuth",
      "item": [
        {
          "name": "Google Login (ê¸°ë³¸)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_token\": \"{{google_id_token}}\",\n  \"platform\": \"android\"\n}"
            },
            "url": {"raw": "{{base_url}}/auth/google", "host": ["{{base_url}}"], "path": ["auth", "google"]},
            "description": "ğŸ”‘ Google ID Token ë°œê¸‰ ë°©ë²•:\n\n**ë°©ë²• 1: OAuth Playground (ê¶Œì¥)**\n1. https://developers.google.com/oauthplayground ì ‘ì†\n2. ì„¤ì •(âš™ï¸)ì—ì„œ 'Use your own OAuth credentials' ì²´í¬\n3. Client ID/Secret ì…ë ¥\n4. Scope ì„ íƒ: openid, email, profile\n5. Authorize â†’ Exchange â†’ id_token ë³µì‚¬\n\n**ë°©ë²• 2: Flutter ì•±**\n- ì•±ì—ì„œ ë¡œê·¸ì¸ í›„ ë””ë²„ê·¸ ë¡œê·¸ì—ì„œ ë³µì‚¬\n\nğŸ“– ìì„¸í•œ ê°€ì´ë“œ: postman/docs/GOOGLE_AUTH_FLOW.md"
          },
          "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 200) {", "    var json = pm.response.json();", "    if (json.access_token) pm.environment.set(\"access_token\", json.access_token);", "    if (json.refresh_token) pm.environment.set(\"refresh_token\", json.refresh_token);", "}", "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"], "type": "text/javascript"}}]
        },
        {
          "name": "Google Login + Calendar",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_token\": \"{{google_id_token}}\",\n  \"access_token\": \"{{google_access_token}}\",\n  \"refresh_token\": \"{{google_refresh_token}}\",\n  \"platform\": \"android\"\n}"
            },
            "url": {"raw": "{{base_url}}/auth/google/calendar", "host": ["{{base_url}}"], "path": ["auth", "google", "calendar"]},
            "description": "ğŸ“… Calendar ê¶Œí•œ í¬í•¨ ë¡œê·¸ì¸\n\n**OAuth Playgroundì—ì„œ í† í° ë°œê¸‰:**\n1. https://developers.google.com/oauthplayground\n2. Scope ì„ íƒ:\n   - openid, email, profile\n   - https://www.googleapis.com/auth/calendar\n3. Authorize â†’ Exchange\n4. 3ê°€ì§€ í† í° ë³µì‚¬:\n   - id_token â†’ google_id_token\n   - access_token â†’ google_access_token\n   - refresh_token â†’ google_refresh_token\n\nğŸ“– ìì„¸í•œ ê°€ì´ë“œ: postman/docs/GOOGLE_AUTH_FLOW.md"
          },
          "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 200) {", "    var json = pm.response.json();", "    if (json.access_token) pm.environment.set(\"access_token\", json.access_token);", "}", "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"], "type": "text/javascript"}}]
        }
      ]
    }
  ]
}
