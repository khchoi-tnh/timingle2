{
  "info": {
    "name": "timingle API",
    "description": "timingle 백엔드 API 테스트 컬렉션",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080/api/v1"
    },
    {
      "key": "accessToken",
      "value": ""
    },
    {
      "key": "refreshToken",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/health",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8080",
              "path": ["health"]
            }
          }
        },
        {
          "name": "Register (Phone)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.access_token) {",
                  "    pm.collectionVariables.set('accessToken', jsonData.access_token);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+821012345678\",\n  \"name\": \"테스트 사용자\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Login (Phone)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.access_token) {",
                  "    pm.collectionVariables.set('accessToken', jsonData.access_token);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+821012345678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Google Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.access_token) {",
                  "    pm.collectionVariables.set('accessToken', jsonData.access_token);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_token\": \"YOUR_GOOGLE_ID_TOKEN_HERE\",\n  \"platform\": \"web\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/google",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "google"]
            },
            "description": "Google ID Token으로 로그인합니다.\n\nID Token 획득 방법:\n1. https://developers.google.com/oauthplayground 접속\n2. 톱니바퀴 > Use your own OAuth credentials 체크\n3. Client ID: 412931718610-688tjrfrajl25al760ro6gaica95jft6.apps.googleusercontent.com\n4. Scope: openid, email, profile 선택\n5. Authorize → Exchange로 ID Token 획득\n\nplatform: web | android | ios"
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.access_token) {",
                  "    pm.collectionVariables.set('accessToken', jsonData.access_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          }
        },
        {
          "name": "Get Me",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          }
        },
        {
          "name": "Google Calendar Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.access_token) {",
                  "    pm.collectionVariables.set('accessToken', jsonData.access_token);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_token\": \"YOUR_GOOGLE_ID_TOKEN_HERE\",\n  \"access_token\": \"YOUR_GOOGLE_ACCESS_TOKEN_HERE\",\n  \"refresh_token\": \"YOUR_GOOGLE_REFRESH_TOKEN_HERE\",\n  \"platform\": \"web\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/google/calendar",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "google", "calendar"]
            },
            "description": "Google Calendar 권한 포함 로그인.\n\n토큰 획득 방법:\n1. https://developers.google.com/oauthplayground 접속\n2. 톱니바퀴 > Use your own OAuth credentials 체크\n3. Client ID/Secret 입력\n4. Scope 선택: openid, email, profile, calendar\n5. Authorize → Exchange\n6. id_token, access_token, refresh_token 복사"
          }
        }
      ]
    },
    {
      "name": "Calendar",
      "item": [
        {
          "name": "Check Calendar Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/calendar/status",
              "host": ["{{baseUrl}}"],
              "path": ["calendar", "status"]
            },
            "description": "현재 사용자의 Google Calendar 연동 상태를 확인합니다."
          }
        },
        {
          "name": "Get Calendar Events",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/calendar/events?start_time=2024-01-01T00:00:00Z&end_time=2024-12-31T23:59:59Z",
              "host": ["{{baseUrl}}"],
              "path": ["calendar", "events"],
              "query": [
                {
                  "key": "start_time",
                  "value": "2024-01-01T00:00:00Z"
                },
                {
                  "key": "end_time",
                  "value": "2024-12-31T23:59:59Z"
                }
              ]
            },
            "description": "Google Calendar에서 이벤트를 조회합니다.\n\nQuery Parameters:\n- start_time: 시작 시간 (RFC3339)\n- end_time: 종료 시간 (RFC3339)"
          }
        },
        {
          "name": "Sync Event to Calendar",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/calendar/sync/1",
              "host": ["{{baseUrl}}"],
              "path": ["calendar", "sync", "1"]
            },
            "description": "timingle 이벤트를 Google Calendar에 동기화합니다.\n\nPath Parameter:\n- event_id: 동기화할 timingle 이벤트 ID"
          }
        }
      ]
    },
    {
      "name": "Events",
      "item": [
        {
          "name": "Create Event",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"테스트 이벤트\",\n  \"description\": \"테스트 설명\",\n  \"start_time\": \"2026-01-15T10:00:00Z\",\n  \"end_time\": \"2026-01-15T11:00:00Z\",\n  \"location\": \"서울시 강남구\",\n  \"participant_ids\": []\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/events",
              "host": ["{{baseUrl}}"],
              "path": ["events"]
            }
          }
        },
        {
          "name": "Get My Events",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events",
              "host": ["{{baseUrl}}"],
              "path": ["events"]
            }
          }
        },
        {
          "name": "Get Event by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events/1",
              "host": ["{{baseUrl}}"],
              "path": ["events", "1"]
            }
          }
        },
        {
          "name": "Update Event",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"수정된 이벤트\",\n  \"description\": \"수정된 설명\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/events/1",
              "host": ["{{baseUrl}}"],
              "path": ["events", "1"]
            }
          }
        },
        {
          "name": "Confirm Event",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events/1/confirm",
              "host": ["{{baseUrl}}"],
              "path": ["events", "1", "confirm"]
            }
          }
        },
        {
          "name": "Cancel Event",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events/1/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["events", "1", "cancel"]
            }
          }
        },
        {
          "name": "Delete Event",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/events/1",
              "host": ["{{baseUrl}}"],
              "path": ["events", "1"]
            }
          }
        }
      ]
    }
  ]
}
